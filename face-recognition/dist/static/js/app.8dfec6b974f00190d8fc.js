webpackJsonp([1],{0:function(e,t){},1:function(e,t){},2:function(e,t){},"2mV7":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("gNcp"),o={};i.keys().forEach(function(e){"./index.js"!==e&&(o[e.replace(/(\.\/|\.js|modules_)/g,"")]=i(e).default)}),t.default=o},"5v5m":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={namespaced:!0,state:{type:"",toolsIndex:0,lineColor:"#4D4D4D",lineWidth:4,mouseFrom:{x:0,y:0},mouseTo:{x:0,y:0}},mutations:{SET_LEFT_TOOLS:function(e,t){var n=t.key,i=t.index;e.type=n,e.toolsIndex=i},SET_DRAW_TYPE:function(e,t){e.type=t},SET_LINE_COLOR:function(e,t){e.lineColor=t},SET_LINE_WIDTH:function(e,t){e.lineWidth=t},SET_MOUSE_FROM:function(e,t){e.mouseFrom=t},SET_MOUSE_TO:function(e,t){e.mouseTo=t}}}},HCjz:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("Vsxo"),o={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var s=n("C7Lr")({name:"App"},o,!1,function(e){n("fJ9W")},null,null).exports,r=n("pfU/"),a=n.n(r),c={name:"Notify",data:function(){return{type:"success",iconMap:{success:"iconchenggong",error:"iconshibai",warning:"iconjinggaoicon"},timer:"",message:"",duration:2e3}},mounted:function(){var e=this;this.timer=setTimeout(function(){e.remove()},this.duration)},methods:{remove:function(){this.$destroy(!0),this.$el.parentNode.removeChild(this.$el)}}},u={render:function(){var e=this.$createElement,t=this._self._c||e;return t("transition",{attrs:{name:"fade"}},[t("div",{staticClass:"notify"},[""!==this.type?t("svg",{staticClass:"icon",staticStyle:{"font-size":"24px","margin-right":"10px"},attrs:{"aria-hidden":"true"}},[t("use",{attrs:{"xlink:href":"#"+this.iconMap[this.type]}})]):this._e(),this._v("\n    "+this._s(this.message)+"\n  ")])])},staticRenderFns:[]};var d=n("C7Lr")(c,u,!1,function(e){n("vhc7")},"data-v-7ad3702a",null).exports,l=n("aGPA"),h=n.n(l),f=Object.prototype.toString,v=function(e,t){if(!e)throw new Error("assert failed, ".concat(t))},p=function(e){return"string"==typeof e};Array.isArray;function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}var O=i.a.extend(d),y=function(e){var t=new O({data:e});t.$mount(),document.body.appendChild(t.$el)};["success","error","warning"].forEach(function(e){y[e]=function(t){var n;v(p(t)||(n=t)&&"object"===h()(n));var i=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach(function(t){a()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({type:e},p(t)?{message:t}:t);return y(i)}});var m=y,g=n("ddSS"),j=n("vAEh");function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}var S=function(e,t){var n=e.mouseFrom,i=e.mouseTo,o=e.lineColor,s=e.lineWidth;return new j.fabric.Line([n.x,n.y,i.x,i.y],function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach(function(t){a()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({stroke:o,strokeWidth:s},"dashed"===t&&{strokeDashArray:[3,5]}))},_={solidLine:function(){return S(this,"solid")},dashedLine:function(){return S(this,"dashed")},circle:function(){var e=this.mouseFrom,t=e.x,n=e.y,i=this.mouseTo,o=i.x,s=i.y,r=Math.sqrt(Math.pow(o-t,2)+Math.pow(s-n,2))/2;return new j.fabric.Circle({left:t,top:n,radius:r,fill:"rgba(255, 255, 255, 0)",stroke:this.lineColor,strokeWidth:this.lineWidth})},rect:function(){var e=this.mouseFrom,t=e.x,n=e.y,i=this.mouseTo,o=i.x,s=i.y;return new j.fabric.Rect({left:t,top:n,fill:"rgba(255, 255, 255, 0)",width:o-t,height:s-n,stroke:this.lineColor,strokeWidth:this.lineWidth})},triangle:function(){var e=this.mouseFrom,t=e.x,n=e.y,i=this.mouseTo,o=i.x,s=i.y;return new j.fabric.Triangle({top:n,left:t,width:o-t,height:s-n,fill:"rgba(255, 255, 255, 0)",stroke:this.lineColor,strokeWidth:this.lineWidth})},rightTriangle:function(){var e=this.mouseFrom,t=e.x,n=e.y,i=this.mouseTo,o=i.x,s=i.y,r="M ".concat(t," ").concat(n," L ").concat(t," ").concat(s," L ").concat(o," ").concat(s," z");return new j.fabric.Path(r,{left:t,top:n,stroke:this.lineColor,strokeWidth:this.lineWidth,fill:"rgba(255, 255, 255, 0)"})},text:function(){var e=this.mouseFrom,t=e.x,n=e.y;return new j.fabric.Textbox("",{left:t,top:n,width:150,fontSize:20,borderColor:"#2c2c2c",hasControls:!1})}},T=function(e,t){return v("function"==typeof _[t],"未找到对应的函数"),_[t].call(e)},x=n("M0iA"),E=n.n(x),k=n("bSIt");function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach(function(t){a()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var D,A,L,I={data:function(){return{canvasObj:{},canvasArr:[{}],canvasIndex:0,toolsMap:{add:this.addHandler,eraser:this.selectHandler,picture:this.picHandler,background:this.picHandler,clear:this.clearHandler,free:this.freeHandler,select:this.selectHandler,copy:this.copyHandler,paste:this.pasteHandler,undo:this.undoHandler,redo:this.redoHandler},copyTemp:{},isRevoke:!0}},computed:P(P(P({},Object(k.c)("tools",["snapshot"])),Object(k.c)("draw",["type","lineColor","lineWidth","mouseFrom","mouseTo"])),{},{drawInfo:function(){return{lineColor:this.lineColor,lineWidth:this.lineWidth,mouseFrom:this.mouseFrom,mouseTo:this.mouseTo}}}),methods:P(P(P({},Object(k.b)("tools",["SET_UNDO_LIST","SET_REDO_LIST","CLEAR_UNDO_LIST","CLEAR_REDO_LIST","SET_SNAPSHOT","SAVE_SNAPSHOT"])),Object(k.b)("draw",["SET_LEFT_TOOLS","SET_DRAW_TYPE","SET_MOUSE_FROM","SET_MOUSE_TO"])),{},{addCanvas:function(){this.canvasObj=new fabric.Canvas("c".concat(this.canvasIndex),{isDrawingMode:!1,selectable:!1,selection:!1}),this.canvasObj.freeDrawingBrush.color=this.lineColor,this.canvasObj.freeDrawingBrush.width=this.lineWidth,this.canvasObj.setHeight(window.innerHeight),this.canvasObj.setWidth(window.innerWidth-70),this.$set(this.canvasArr,this.canvasIndex,this.canvasObj)},sendEvent:function(){try{E()({url:"http://localhost:4002/postPic",method:"post",data:{str:this.canvasObj.toDataURL("image/png",.5).slice(22),type:0}}).then(function(e){console.log(e)})}catch(e){console.error(e)}},mouseDown:function(e){var t=e.e;this.setMousePosition(t,"from"),this.isDrawing=!0,this.sendEvent()},mouseUp:function(e){var t=e.e;this.setMousePosition(t,"to"),this.drawingObject=null,this.isDrawing=!1,this.sendEvent()},mouseMove:function(e){var t=e.e;this.isDrawing&&(this.setMousePosition(t,"to"),!this.isFreeDrawing&&this.drawing())},objectRotating:function(){this.isDrawing=!1},objectScaling:function(){this.isDrawing=!1},selectionCreated:function(e){var t=this;"eraser"===this.type&&(e.target._objects?e.target._objects.forEach(function(e){t.canvasObj.remove(e)}):this.canvasObj.remove(e.target),this.canvasObj.discardActiveObject())},objectMoving:function(e){this.isDrawing=!1},objectAdded:function(){this.debounceAdd()},objectModified:function(){this.debounceAdd()},debounceAdd:(D=function(){this.isRevoke&&this.save(),this.isRevoke=!0},A=500,L=null,function(){var e=arguments,t=this;clearTimeout(L),L=setTimeout(function(n){D.apply(t,e)},A)}),changePage:function(e,t){var n=this;t<0||t>this.canvasArr.length-1||(this.canvasIndex=t,0===Object.keys(e).length?this.$nextTick(function(e){n.initCanvas()}):this.canvasObj=this.canvasArr[this.canvasIndex],this.reset())},save:function(){this.CLEAR_REDO_LIST(),this.snapshot&&this.SET_UNDO_LIST(),this.SAVE_SNAPSHOT(JSON.stringify(this.canvasObj))},reset:function(){this.CLEAR_REDO_LIST(),this.CLEAR_UNDO_LIST(),this.SAVE_SNAPSHOT(JSON.stringify(this.canvasObj))},replay:function(){var e=this;this.canvasObj.clear(),this.isRevoke=!1,this.canvasObj.loadFromJSON(this.snapshot,function(){e.canvasObj.renderAll()})},redoHandler:function(){this.SET_UNDO_LIST(),this.SET_SNAPSHOT("redo"),this.replay()},undoHandler:function(){this.SET_REDO_LIST(),this.SET_SNAPSHOT("undo"),this.replay()},setMousePosition:function(e,t){var n=e.offsetX,i=e.offsetY;this["to"===t?"SET_MOUSE_TO":"SET_MOUSE_FROM"]({x:n,y:i})},drawing:function(){this.drawingObject&&this.canvasObj.remove(this.drawingObject);var e=T(this.drawInfo,this.type);e&&(this.canvasObj.add(e),"text"===this.type&&(this.textObject=e,this.textObject.enterEditing(),this.textObject.hiddenTextarea.focus()),this.drawingObject=e)},resetCanvas:function(){this.canvasObj.skipTargetFind=!0,this.canvasObj.isDrawingMode=!1,this.canvasObj.selectable=!0,this.canvasObj.selection=!1,this.textObject&&(this.textObject.exitEditing(),this.textObject=null)},handleTools:function(e,t){this.SET_LEFT_TOOLS({key:e,index:t}),this.resetCanvas();var n=this.toolsMap[e];n&&n()},addHandler:function(){this.canvasArr.push({}),this.changePage({},this.canvasArr.length-1)},picHandler:function(){var e=document.getElementById("upload"),t=document.createEvent("MouseEvents");t.initEvent("click",!1,!1),e.dispatchEvent(t)},clearHandler:function(){this.canvasObj.clear()},freeHandler:function(){this.canvasObj.isDrawingMode=!0,this.canvasObj.freeDrawingBrush.color=this.lineColor,this.canvasObj.freeDrawingBrush.width=this.lineWidth},selectHandler:function(){this.canvasObj.skipTargetFind=!1,this.canvasObj.selectable=!0,this.canvasObj.selection=!0},copyHandler:function(){var e=this,t=this.canvasObj.getActiveObject();t?t.clone(function(t){e.copyTemp=t,e.$notify.success("复制成功")}):this.$notify.warning("请选中要复制的元素")},pasteHandler:function(){var e,t=this;(e=this.copyTemp,![Array,Object].includes((e||{}).constructor)||Object.keys(e).length)?this.copyTemp.clone(function(e){t.canvasObj.discardActiveObject(),e.set({left:e.left+10,top:e.top+10,evented:!0}),"activeSelection"===e.type?(e.canvas=t.canvasObj,e.forEachObject(function(e){t.canvasObj.add(e)}),e.setCoords()):t.canvasObj.add(e),t.copyTemp.top+=10,t.copyTemp.left+=10,t.canvasObj.setActiveObject(e),t.canvasObj.requestRenderAll(),t.selectHandler()}):this.$notify.warning("请选中要复制的元素")}})};function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}var R={name:"TopTools",data:function(){return{currentIndex:"",editStatus:!1,tools:[{key:"undo",name:"上一步",icon:"iconshangyibu"},{key:"redo",name:"下一步",icon:"iconxiayibu"},{key:"select",name:"选择",icon:"icontuozhuai"},{key:"copy",name:"复制",icon:"iconfuzhi"},{key:"paste",name:"粘贴",icon:"iconniantie"}]}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach(function(t){a()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},Object(k.c)("tools",["redoArr","undoArr"])),methods:{isDisabled:function(e){return"redo"===e?0===this.redoArr.length:"undo"===e?0===this.undoArr.length:void 0},handleTools:function(e,t){this.currentIndex=t,this.$emit("handleTools",e)}}},H={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"edit"},[n("div",{staticClass:"edit-tools"},e._l(e.tools,function(t,i){return n("button",{key:t.key,staticClass:"edit-tools-item",class:{active:e.currentIndex===i,"btn-disabled":e.isDisabled(t.key)},attrs:{disabled:e.isDisabled(t.key)},on:{click:function(n){return e.handleTools(t.key,i)}}},[n("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[n("use",{attrs:{"xlink:href":"#"+t.icon}})])])}),0)])},staticRenderFns:[]};var N=n("C7Lr")(R,H,!1,function(e){n("o5dN")},"data-v-49af1025",null).exports,M={name:"PicBoard",props:{bgType:{type:String,default:""},canvasArr:{type:Array,default:function(){return[]}},canvasIndex:{type:Number,default:0}}},W={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"board"},[n("div",{staticClass:"board-wrapper",staticStyle:{overflow:"hidden"}},[n("transition-group",{attrs:{tag:"div",name:"fade"}},e._l(e.canvasArr,function(t,i){return n("div",{directives:[{name:"show",rawName:"v-show",value:i===e.canvasIndex,expression:"index === canvasIndex"}],key:"d"+i},[n("canvas",{attrs:{id:"c"+i}})])}),0)],1),e._v(" "),n("div",{staticClass:"board-page"},e._l(e.canvasArr,function(t,i){return n("div",{key:"p"+i,staticClass:"board-page-item",class:{"page-active":i===e.canvasIndex},on:{click:function(n){return e.$emit("changePage",t,i)}}},[e._v("\n      "+e._s(i+1)+"\n    ")])}),0),e._v(" "),n("div",{staticClass:"position-point"},[e._v("\n    [第 "+e._s(e.canvasIndex+1)+" 页]\n    ")])])},staticRenderFns:[]};var $=n("C7Lr")(M,W,!1,function(e){n("Tand")},"data-v-7edfaeeb",null).exports;function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach(function(t){a()(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var V={name:"LeftTools",data:function(){return{lineWidthIndex:0,lineColorIndex:0,isFreeStatus:!1,isColorStatus:!1,isShapeStatus:!1,shapeList:[{key:"solidLine",name:"直线",icon:"iconline"},{key:"dashedLine",name:"虚线",icon:"iconxuxian"},{key:"arrowLine",name:"箭头",icon:"iconarrow-right"},{key:"rect",name:"矩形",icon:"iconjuxing"},{key:"triangle",name:"三角形",icon:"iconiconfontsanjiaoxing"},{key:"rightTriangle",name:"直角三角形",icon:"iconzhijiaosanjiaoxing"},{key:"circle",name:"圆形",icon:"iconyuanxing1"}],colorPicker:["#4D4D4D","#999999","#F44E3B","#FE9200","#FCDC00","#A4DD00","#73D8FF","#FDA1FF"],tools:[{key:"add",name:"添加画板",icon:"icontianjiayemian1"},{key:"free",name:"画笔",icon:"iconhuabi"},{key:"color",name:"调色板",icon:"iconyanse1"},{key:"eraser",name:"橡皮",icon:"iconeraser"},{key:"shape",name:"图形",icon:"icontuxing"},{key:"text",name:"文本",icon:"iconwenzi"},{key:"picture",name:"图片",icon:"icontupian"},{key:"clear",name:"清除",icon:"iconEliminate"},{key:"background",name:"背景",icon:"iconbackground"},{key:"setting",name:"设置",icon:"iconcanshu"}]}},computed:B({},Object(k.c)("draw",["type","lineWidth","lineColor","toolsIndex"])),methods:B(B({},Object(k.b)("draw",["SET_LINE_WIDTH","SET_LINE_COLOR"])),{},{changeLineWidth:function(e,t){this.lineWidthIndex=t,this.SET_LINE_WIDTH(e)},changeLineColor:function(e,t){this.lineColorIndex=t,this.SET_LINE_COLOR(e),this.$emit("handleTools","free",1)},mouseChange:function(e,t){var n={free:"isFreeStatus",color:"isColorStatus",shape:"isShapeStatus"}[e];n&&(this[n]=t)}})},z={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"left-tools"},e._l(e.tools,function(t,i){return n("div",{key:t.key,staticClass:"left-tools-item",class:{active:e.toolsIndex===i},on:{click:function(n){return e.$emit("handleTools",t.key,i)}}},[n("div",{staticStyle:{width:"100%"},on:{mouseenter:function(n){return e.mouseChange(t.key,!0)},mouseleave:function(n){return e.mouseChange(t.key,!1)}}},[n("svg",{staticClass:"icon",style:{color:"free"===t.key&&e.lineColor},attrs:{"aria-hidden":"true"}},[n("use",{attrs:{"xlink:href":"#"+t.icon}})])]),e._v(" "),"picture"===t.key?n("input",{ref:"upload",refInFor:!0,staticStyle:{display:"none"},attrs:{type:"file",id:"upload"},on:{change:function(t){return e.$emit("uploadFile",t)}}}):e._e(),e._v(" "),"free"===t.key?n("div",{staticClass:"extend",style:{top:69*i+"px"},on:{mouseenter:function(t){e.isFreeStatus=!0},mouseleave:function(t){e.isFreeStatus=!1}}},[n("transition",{attrs:{name:"slide-fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.isFreeStatus,expression:"isFreeStatus"}]},e._l([5,10,15,20,25],function(t,i){return n("div",{staticStyle:{display:"inline-block",height:"100%",cursor:"pointer"},on:{click:function(n){return e.changeLineWidth(t,i)}}},[n("span",{style:{display:"inline-block",width:t+"px",height:t+"px",borderRadius:t/2+"px",backgroundColor:e.lineWidthIndex===i?e.lineColor:"#e6e6e6",margin:"0 15px"}})])}),0)])],1):e._e(),e._v(" "),"color"===t.key?n("div",{staticClass:"extend",style:{top:69*i+"px"},on:{mouseenter:function(t){e.isColorStatus=!0},mouseleave:function(t){e.isColorStatus=!1}}},[n("transition",{attrs:{name:"slide-fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.isColorStatus,expression:"isColorStatus"}]},e._l(e.colorPicker,function(t,i){return n("span",{key:i},[n("span",{style:{display:"inline-block",width:"20px",height:"20px",borderRadius:"5px",backgroundColor:t,margin:"0 15px"},on:{click:function(n){return n.stopPropagation(),e.changeLineColor(t,i)}}},[n("div",{directives:[{name:"show",rawName:"v-show",value:i===e.lineColorIndex,expression:"index === lineColorIndex"}],staticClass:"check-point"})])])}),0)])],1):e._e(),e._v(" "),"shape"===t.key?n("div",{staticClass:"extend",style:{top:69*i+"px"},on:{mouseenter:function(t){e.isShapeStatus=!0},mouseleave:function(t){e.isShapeStatus=!1}}},[n("transition",{attrs:{name:"slide-fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.isShapeStatus,expression:"isShapeStatus"}]},e._l(e.shapeList,function(t,i){return n("span",{key:i,staticClass:"extend-shape",style:{border:e.type===t.key?"2px dashed #77c9ff":"none"},on:{click:function(n){return n.stopPropagation(),e.$emit("handleTools",t.key,4)}}},[n("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[n("use",{attrs:{"xlink:href":"#"+t.icon}})])])}),0)])],1):e._e()])}),0)},staticRenderFns:[]};var J={name:"TeacherBoard",components:{PicBoard:$,LeftTools:n("C7Lr")(V,z,!1,function(e){n("OjXi")},"data-v-433e58aa",null).exports,TopTools:N},mixins:[I],data:function(){return{drawingObject:null,isDrawing:!1,textObject:null}},mounted:function(){this.initKeyboardEvent(),this.initCanvas()},computed:{isFreeDrawing:function(){return"free"===this.type}},methods:{initCanvas:function(){this.addCanvas(),this.initEvent()},initEvent:function(){this.canvasObj.on({"mouse:down":this.mouseDown,"mouse:up":this.mouseUp,"mouse:move":this.mouseMove,"object:added":this.objectAdded,"object:rotating":this.objectRotating,"object:scaling":this.objectScaling,"object:moving":this.objectMoving,"object:modified":this.objectModified,"selection:created":this.selectionCreated})},initKeyboardEvent:function(){var e=this;document.addEventListener("keydown",function(t){var n=t.keyCode,i=38===n;if(i||40===n){var o=i?e.canvasIndex-1:e.canvasIndex+1;e.changePage(e.canvasArr[o],o)}})},uploadFile:function(e){var t=this,n=new FileReader;n.onload=function(e){var n=e.target.result;("background"===t.type?function(e){j.fabric.Image.fromURL(e,function(e){t.canvasObj.setBackgroundImage(e,t.canvasObj.renderAll.bind(t.canvasObj),{scaleX:t.canvasObj.width/e.width,scaleY:t.canvasObj.height/e.height})})}:function(e){var n=new Image;n.src=e,n.onload=function(){var e=new j.fabric.Image(n);t.canvasObj.centerObject(e),t.canvasObj.add(e),t.canvasObj.renderAll()}})(n)},n.readAsDataURL(e.target.files[0])}}},Y={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"board"},[n("LeftTools",{on:{uploadFile:e.uploadFile,handleTools:e.handleTools}}),e._v(" "),n("TopTools",{on:{handleTools:e.handleTools}}),e._v(" "),n("PicBoard",{staticStyle:{width:"calc(100% - 70px)",float:"right"},attrs:{canvasArr:e.canvasArr,canvasIndex:e.canvasIndex},on:{changePage:e.changePage}})],1)},staticRenderFns:[]};var X=n("C7Lr")(J,Y,!1,function(e){n("swnL")},"data-v-7067db12",null).exports,q={name:"StudentBoard",mixins:[I],components:{PicBoard:$},data:function(){return{}},mounted:function(){this.init(),this.addListener()},methods:{init:function(){this.canvasObj=new j.fabric.Canvas("c".concat(this.canvasIndex),{isDrawingMode:!1,selectable:!1,selection:!1}),this.canvasObj.setHeight(window.innerHeight),this.canvasObj.setWidth(window.innerWidth),this.$set(this.canvasArr,this.canvasIndex,this.canvasObj)},addListener:function(){接受教师端播放的数据,socket.on("painting",function(e){console.log(e)})},play:function(e){var t=this;this.canvasObj.loadFromJSON(e,function(){t.canvasObj.renderAll()})}}},K={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"student"},[t("PicBoard",{attrs:{canvasArr:this.canvasArr,canvasIndex:this.canvasIndex},on:{changePage:this.changePage}})],1)},staticRenderFns:[]};n("C7Lr")(q,K,!1,function(e){n("HCjz")},"data-v-71822317",null).exports;i.a.use(g.a);var G=new g.a({routes:[{path:"/",name:"TeacherBoard",component:X}]}),Q=n("2mV7");i.a.use(k.a);var Z=new k.a.Store({modules:Q.default});i.a.config.productionTip=!1,i.a.prototype.$notify=m,new i.a({el:"#app",router:G,store:Z,render:function(e){return e(s)}})},OjXi:function(e,t){},Tand:function(e,t){},VfLY:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={namespaced:!0,state:{snapshot:"",redoArr:[],undoArr:[]},mutations:{SAVE_SNAPSHOT:function(e,t){e.snapshot=t},SET_SNAPSHOT:function(e,t){e.snapshot=("undo"===t?e.undoArr:e.redoArr).pop()},SET_UNDO_LIST:function(e){e.undoArr.push(e.snapshot)},SET_REDO_LIST:function(e){e.redoArr.push(e.snapshot)},CLEAR_UNDO_LIST:function(e){e.undoArr=[]},CLEAR_REDO_LIST:function(e){e.redoArr=[]}}}},fJ9W:function(e,t){},gNcp:function(e,t,n){var i={"./index.js":"2mV7","./modules_draw.js":"5v5m","./modules_tools.js":"VfLY"};function o(e){return n(s(e))}function s(e){var t=i[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}o.keys=function(){return Object.keys(i)},o.resolve=s,e.exports=o,o.id="gNcp"},o5dN:function(e,t){},swnL:function(e,t){},vhc7:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.8dfec6b974f00190d8fc.js.map